<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_131) on Thu Aug 31 09:27:36 EDT 2017 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>com.solacesystems.poc (solft 0.2.0 API)</title>
<meta name="date" content="2017-08-31">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="com.solacesystems.poc (solft 0.2.0 API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/solacesystems/poc/package-summary.html">Package</a></li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li>Next&nbsp;Package</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/solacesystems/poc/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;com.solacesystems.poc</h1>
<div class="docSummary">
<div class="block">This Java library leverages Solace's guaranteed delivery capabilities to provide simple
 Leader Election events to applications requiring fault tolerance, by
 creating an instance of the <a href="../../../com/solacesystems/poc/FTMgr.html" title="class in com.solacesystems.poc"><code>FTMgr</code></a> and binding
 a listener to it to receive FT role event updates.</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/solacesystems/poc/FTEventListener.html" title="interface in com.solacesystems.poc">FTEventListener</a></td>
<td class="colLast">
<div class="block">Interface for applications interested in joining a shared Solace FT-Cluster
 and receiving FT state change events reflecting the state of your application's
 membership in the cluster.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/solacesystems/poc/FTMgr.html" title="class in com.solacesystems.poc">FTMgr</a></td>
<td class="colLast">
<div class="block">Instances of this class bind to a FT-cluster in a Solace Message Broker and manage FT-cluster membership
 events for that binding.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package com.solacesystems.poc Description">Package com.solacesystems.poc Description</h2>
<div class="block"><p>This Java library leverages Solace's guaranteed delivery capabilities to provide simple
 Leader Election events to applications requiring fault tolerance, by
 creating an instance of the <a href="../../../com/solacesystems/poc/FTMgr.html" title="class in com.solacesystems.poc"><code>FTMgr</code></a> and binding
 a listener to it to receive FT role event updates.
 </p>

 <p>To use it you must have a Solace Message Broker available for your application to
 connect to for this library to work.
 </p>

 <p>Here's a basic example of a program using the library to join a FT-cluster, then
 print to the console any time its cluster membership role changes:</p>
 <pre>
 <code>
    new FTMgr(solaceConnectionProperties)
        .start(ftClusterName,
            new FTEventListener() {
                 @Override
                public void onActive(BytesXMLMessage m) {
                    // in this case m is always null
                    logger.info("STATE CHANGE TO ACTIVE");
                }

                 @Override
                public void onBackup() {
                    logger.info("STATE CHANGE TO BACKUP");
                }
            });
    // ...
 </code></pre>
 <p><strong>Stateless Event Listeners</strong></p>

 <p>First you will need a connected Solace session. You can either create a new session
 just for <em>solft</em> by passing an instance of <a href="http://docs.oracle.com/javase/8/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util"><code>Properties</code></a>, or more likely you'd pass a
 shared Solace session, into your <a href="../../../com/solacesystems/poc/FTMgr.html" title="class in com.solacesystems.poc"><code>FTMgr</code></a> constructor.
 You use the <a href="../../../com/solacesystems/poc/FTMgr.html" title="class in com.solacesystems.poc"><code>FTMgr</code></a> to join the
 FT cluster and listen for events when cluster leadership state changes occur.</p>

 <p>To listen for these events you must implement a simple <a href="../../../com/solacesystems/poc/FTEventListener.html" title="interface in com.solacesystems.poc"><code>FTEventListener</code></a> interface
 and pass the listener into the <a href="../../../com/solacesystems/poc/FTMgr.html#start-java.lang.String-com.solacesystems.poc.FTEventListener-"><code>start(java.lang.String, com.solacesystems.poc.FTEventListener)</code></a>
 method when starting the <a href="../../../com/solacesystems/poc/FTMgr.html" title="class in com.solacesystems.poc"><code>FTMgr</code></a>. All applications joining the same named cluster on
 the same Solace broker will be part of the same FT-cluster, where a single application is elected leader until
 it unbinds from the cluster for any reason. In that event, the cluster elects a new member and an
 <a href="../../../com/solacesystems/poc/FTEventListener.html#onActive-com.solacesystems.jcsmp.BytesXMLMessage-"><code>FTEventListener.onActive(com.solacesystems.jcsmp.BytesXMLMessage)</code></a> event
 is raised for that instance notifying it of this role change.</p>

 <p>For stateless listeners, the message object will always be <code>null</code>.</p>

 <p><strong>Stateful Event Listeners</strong></p>

 <p>With a Stateful Event Listener, an Active event is received with the last output message sent by the
 previous Active member. This can be used to synchronize your newly-elected Active member to that state.</p>

 <p>To run a Stateful Event Listener you start the <a href="../../../com/solacesystems/poc/FTMgr.html" title="class in com.solacesystems.poc"><code>FTMgr</code></a> instance by calling
 <a href="../../../com/solacesystems/poc/FTMgr.html#startStateful-java.lang.String-java.lang.String-com.solacesystems.poc.FTEventListener-"><code>startStateful(java.lang.String, java.lang.String, com.solacesystems.poc.FTEventListener)</code></a>
 rather than <a href="../../../com/solacesystems/poc/FTMgr.html#start-java.lang.String-com.solacesystems.poc.FTEventListener-"><code>start(java.lang.String, com.solacesystems.poc.FTEventListener)</code></a>  and
 pass into it a topic subscription string that subscribes to all output from this application. Each instance must
 be configured with this to support Stateful Listeners therefore must all be able to publish output messages on a
 topic that can be subscribed to in this manner.</p>

 <p>Here's an example.</p>

 <p>Let's say I have an application that is setup to publish output messages to a _topic hierarchy_ with an
 agreed structure. In our example, let's say the agreed structure is:</p>

 <pre>
 [SOURCE] / [SRC INST] / [DESTINATION] / [EVENT TYPE]
 </pre>

 <p>In our case, when my instance (#3) of application AKNA sends an OTD measurement to IGALUK the topic might look like this:</p>

 <pre>
 AKNA / 3 / IGALUK / OTD
 </pre>

 <p>This allows us to configure all the instances of AKNA to subscribe to all output from any of the instances (and NOT
 from any other application instances) by starting our <a href="../../../com/solacesystems/poc/FTMgr.html" title="class in com.solacesystems.poc"><code>FTMgr</code></a> instance with an output subscription like:</p>

 <pre>
 AKNA/&gt;
 </pre>

 <p>The code example becomes:</p>
 <pre><code>
     new FTMgr(solaceConnection)
         .startStateful(ftClusterName, "AKNA/%gt;",
             new FTEventListener() {
                  @Override
                 public void onActive(BytesXMLMessage m) {
                     logger.info("STATE CHANGE TO ACTIVE with state: " + m.dump());
                 }

                  @Override
                 public void onBackup() {
                     logger.info("STATE CHANGE TO BACKUP");
                 }
             });
     // ...
 </code></pre></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../com/solacesystems/poc/package-summary.html">Package</a></li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li>Next&nbsp;Package</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/solacesystems/poc/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2017. All rights reserved.</small></p>
</body>
</html>
